@using blazam.org.Data.Plugins.Models
@inject PluginsDbContext DbContext

@code {
    [Parameter] public int PluginId { get; set; }
    [Parameter] public int UserId { get; set; }
    private string NewComment;

    private async Task AddComment()
    {
        if (!string.IsNullOrWhiteSpace(NewComment))
        {
            var comment = new PluginComment
            {
                Content = NewComment,
                PluginId = PluginId,
                UserId = UserId,
                CreatedAt = DateTime.UtcNow
            };
            DbContext.PluginComments.Add(comment);
            await DbContext.SaveChangesAsync();
            NewComment = string.Empty;
        }
    }
}

<div>
    <textarea @bind="NewComment" placeholder="Add a comment"></textarea>
    <button @onclick="AddComment">Submit</button>
</div>